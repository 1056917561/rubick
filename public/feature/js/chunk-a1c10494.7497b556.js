(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a1c10494"],{"3e1f":function(e,t,n){"use strict";n.r(t);var c=n("7a23"),r=n("e1bd"),a=n("f64c"),u=n("f5e0"),s={class:"account"},i=["src"],o={__name:"index",setup:function(e){var t=Object(c["Q"])(window.rubick.dbStorage.getItem("rubick-user-info")),n=Object(c["Q"])(""),o=Object(r["a"])(),b=Object(c["Q"])(!1),l=function(){b.value=!0,n.value||t.value||u["a"].getScanCode({scene:o}).then((function(e){n.value="data:image/png;base64,".concat(e.dataUrl)}))},d=null;return Object(c["eb"])([b],(function(){b.value?d=setInterval((function(){u["a"].checkLoginStatus({scene:o}).then((function(e){console.log(e),e.openId&&(window.rubick.dbStorage.setItem("rubick-user-info",e),t.value=e,a["a"].success("登录成功！"),b.value=!1,clearInterval(d),d=null)}))}),2e3):(clearInterval(d),d=null)})),function(e,r){var a=Object(c["U"])("a-button"),u=Object(c["U"])("a-result"),o=Object(c["U"])("a-modal");return Object(c["L"])(),Object(c["n"])("div",s,[t.value?Object(c["m"])("",!0):(Object(c["L"])(),Object(c["l"])(u,{key:0,title:"请先登录","sub-title":"用户暂未登录，无法体验更多设置"},{extra:Object(c["gb"])((function(){return[Object(c["q"])(a,{onClick:l,type:"primary"},{default:Object(c["gb"])((function(){return[Object(c["p"])(" 使用微信小程序登录 ")]})),_:1})]})),_:1})),Object(c["q"])(o,{footer:null,visible:b.value,"onUpdate:visible":r[0]||(r[0]=function(e){return b.value=e})},{default:Object(c["gb"])((function(){return[Object(c["q"])(u,{title:"请使用微信扫码登录!","sub-title":"使用微信扫描上面的 rubick 小程序二维码进行授权登录"},{icon:Object(c["gb"])((function(){return[Object(c["o"])("img",{width:"200",src:n.value},null,8,i)]})),_:1})]})),_:1},8,["visible"])])}}},b=(n("7251"),n("6b0d")),l=n.n(b);const d=l()(o,[["__scopeId","data-v-2bc021e6"]]);t["default"]=d},7251:function(e,t,n){"use strict";n("9d3e")},"9d3e":function(e,t,n){},e1bd:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));let c=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((e,t)=>(t&=63,e+=t<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_",e),"")},f5e0:function(e,t,n){"use strict";var c=n("c7eb"),r=n("1da1"),a=n("bc3a"),u=n.n(a),s=u.a.create({baseURL:"https://rubick.vip/api/"});t["a"]={getScanCode:function(e){return Object(r["a"])(Object(c["a"])().mark((function t(){var n,r;return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.scene,t.next=3,s.get("/users/getScanCode",{params:{scene:n}});case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}}),t)})))()},checkLoginStatus:function(e){return Object(r["a"])(Object(c["a"])().mark((function t(){var n,r;return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.scene,t.next=3,s.post("/users/checkLoginStatus",{scene:n});case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}}),t)})))()},getUserInfo:function(e){return Object(r["a"])(Object(c["a"])().mark((function t(){var n,r;return Object(c["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.openId,t.next=3,s.post("/users/getUserInfo",{openId:n});case 3:return r=t.sent,t.abrupt("return",r.data);case 5:case"end":return t.stop()}}),t)})))()}}}}]);
//# sourceMappingURL=chunk-a1c10494.7497b556.js.map